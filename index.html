<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shot Visualizer – Team 1700</title>
</head>
<body>

<!-- ═══════════════════ SIDEBAR ═══════════════════ -->
<div id="sidebar">
  <h1>Shot Visualizer – 1700</h1>

  <!-- Shot Speed -->
  <div class="control-group">
    <h2>Shot Speed</h2>
    <div class="mode-toggle" data-group="speed">
      <button class="active" data-mode="variable">Variable</button>
      <button data-mode="fixed">Fixed</button>
    </div>
    <div id="speed-variable">
      <div class="control-row">
        <label>Min Speed</label>
        <input type="range" id="minSpeed" min="1" max="30" step="0.1" value="8.5">
        <span class="value" id="minSpeed-val">8.5 m/s</span>
      </div>
      <div class="control-row">
        <label>Max Speed</label>
        <input type="range" id="maxSpeed" min="1" max="30" step="0.1" value="21.3">
        <span class="value" id="maxSpeed-val">21.3 m/s</span>
      </div>
    </div>
    <div id="speed-fixed" style="display:none;">
      <div class="control-row">
        <label>Shot Speed</label>
        <input type="range" id="fixedSpeed" min="1" max="30" step="0.1" value="15">
        <span class="value" id="fixedSpeed-val">15.0 m/s</span>
      </div>
    </div>
  </div>

  <!-- Hood Angle -->
  <div class="control-group">
    <h2>Hood Angle</h2>
    <div class="mode-toggle" data-group="angle">
      <button class="active" data-mode="variable">Variable</button>
      <button data-mode="fixed">Fixed</button>
    </div>
    <div id="angle-variable">
      <div class="control-row">
        <label>Min Angle</label>
        <input type="range" id="minAngle" min="5" max="85" step="0.5" value="5">
        <span class="value" id="minAngle-val">5.0°</span>
      </div>
      <div class="control-row">
        <label>Max Angle</label>
        <input type="range" id="maxAngle" min="5" max="85" step="0.5" value="85">
        <span class="value" id="maxAngle-val">85.0°</span>
      </div>
    </div>
    <div id="angle-fixed" style="display:none;">
      <div class="control-row">
        <label>Hood Angle</label>
        <input type="range" id="fixedAngle" min="5" max="85" step="0.5" value="45">
        <span class="value" id="fixedAngle-val">45.0°</span>
      </div>
    </div>
  </div>

  <!-- Physics -->
  <div class="control-group">
    <h2>Physics</h2>
    <div class="control-row">
      <label for="dragEnabled">Air Drag</label>
      <input type="checkbox" id="dragEnabled">
      <span class="value" id="dragEnabled-val">Off</span>
    </div>
  </div>

  <!-- Robot Velocity -->
  <div class="control-group" id="robot-velocity-group">
    <h2>Robot Velocity</h2>
    <div class="control-row">
      <label>Tangential</label>
      <input type="range" id="tangentialVelo" min="0" max="5" step="0.1" value="0">
      <span class="value" id="tangentialVelo-val">0.0 m/s</span>
    </div>
    <div class="control-row">
      <label>Radial</label>
      <input type="range" id="radialVelo" min="-3" max="3" step="0.1" value="0">
      <span class="value" id="radialVelo-val">0.0 m/s</span>
    </div>
  </div>

  <!-- Visualization -->
  <div class="control-group">
    <h2>Visualization</h2>
    <div class="control-row">
      <label>View</label>
      <div class="mode-toggle" data-group="view" style="flex:1; margin-bottom:0;">
        <button class="active" data-mode="field">Field Map</button>
        <button data-mode="range">Range Chart</button>
      </div>
    </div>
    <div class="control-row">
      <label>Color Mode</label>
      <select id="colorMode">
        <option value="descent" selected>Descent Angle</option>
        <option value="speed">Shot Speed</option>
        <option value="angle">Hood Angle</option>
      </select>
    </div>
    <div class="control-row">
      <label>Grid Res.</label>
      <input type="range" id="gridRes" min="0.1" max="0.5" step="0.05" value="0.2">
      <span class="value" id="gridRes-val">0.20 m</span>
    </div>
    <div class="control-row">
      <label>Shooter Z</label>
      <input type="range" id="shooterZ" min="0" max="1.0" step="0.01" value="0.48">
      <span class="value" id="shooterZ-val">0.00 m</span>
    </div>
    <div class="control-row">
      <label>Ceiling</label>
      <input type="range" id="ceilingHeight" min="3" max="15" step="0.1" value="7.0">
      <span class="value" id="ceilingHeight-val">7.0 m</span>
    </div>
    <div class="control-row">
      <label>Max Vy @&nbsp;Target</label>
      <input type="range" id="maxVyAtTarget" min="-10" max="0" step="0.1" value="-0.5">
      <span class="value" id="maxVyAtTarget-val">-0.5 m/s</span>
    </div>
    <div class="control-row">
      <label>Max Lateral Drift</label>
      <input type="range" id="maxLateralDrift" min="0" max="1.0" step="0.05" value="0.3">
      <span class="value" id="maxLateralDrift-val">0.30 m</span>
    </div>
  </div>

  <!-- Target -->
  <div class="control-group">
    <h2>Target (Blue Hub)</h2>
    <div class="control-row">
      <label>Target X</label>
      <input type="range" id="targetX" min="0" max="16.54" step="0.01" value="4.625594">
      <span class="value" id="targetX-val">4.63 m</span>
    </div>
    <div class="control-row">
      <label>Target Y</label>
      <input type="range" id="targetY" min="0" max="8.07" step="0.01" value="4.034663">
      <span class="value" id="targetY-val">4.03 m</span>
    </div>
    <div class="control-row">
      <label>Target Z</label>
      <input type="range" id="targetZ" min="0.5" max="4" step="0.01" value="1.60">
      <span class="value" id="targetZ-val">1.60 m</span>
    </div>
  </div>

  <div id="status">Ready</div>

  <button id="copy-link">Copy Shareable Link</button>
</div>

<!-- ═══════════════════ CANVAS ═══════════════════ -->
<div id="canvas-container">
  <canvas id="field-canvas"></canvas>
  <div id="tooltip"></div>
</div>

<!-- ═══════════════════ SHOT MODAL ═══════════════════ -->
<div id="shot-modal-backdrop" style="display:none;">
  <div id="shot-modal">
    <div id="shot-modal-header">
      <span id="shot-modal-title">Shot Trajectory</span>
      <button id="shot-modal-close">&times;</button>
    </div>
    <div id="shot-modal-grid">
      <div class="shot-panel">
        <div class="shot-panel-label">SIDE VIEW &mdash; Range &times; Height</div>
        <canvas id="cv-side"></canvas>
      </div>
      <div class="shot-panel" id="shot-info-panel">
        <div class="shot-panel-label">SHOT PARAMETERS</div>
        <div id="shot-info"></div>
      </div>
      <div class="shot-panel">
        <div class="shot-panel-label">TOP VIEW &mdash; Range &times; Lateral</div>
        <canvas id="cv-top"></canvas>
      </div>
      <div class="shot-panel">
        <div class="shot-panel-label">BACK VIEW &mdash; Lateral &times; Height</div>
        <canvas id="cv-back"></canvas>
      </div>
    </div>
  </div>
</div>

<script type="module" src="/src/main.ts"></script>
</body>
</html>
